![OpenVinoSharp](https://socialify.git.ci/guojin-yan/OpenVinoSharp/image?description=1&descriptionEditable=ğŸ’%20OpenVINO%20wrapper%20for%20.NETğŸ’%20&forks=1&issues=1&logo=https%3A%2F%2Fs2.loli.net%2F2023%2F01%2F26%2FylE1K5JPogMqGSW.png&name=1&owner=1&pattern=Circuit%20Board&pulls=1&stargazers=1&theme=Light)

<p align="center">    
    <a href="./LICENSE.txt">
        <img src="https://img.shields.io/github/license/guojin-yan/openvinosharp.svg">
    </a>    
    <a >
        <img src="https://img.shields.io/badge/Framework-.NET5.0%2C%20.NET6.0%2C%20.NET48-pink.svg">
    </a>    

ç®€ä½“ä¸­æ–‡| [English](README.md)

# çˆ±å…‹æ–¯å¼€å‘æ¿ä½¿ç”¨OpenVinoSharpéƒ¨ç½²Yolov8æ¨¡å‹

&emsp;    è‹±ç‰¹å°”å‘è¡Œç‰ˆ [OpenVINOâ„¢](www.openvino.ai)å·¥å…·å¥—ä»¶åŸºäºoneAPI è€Œå¼€å‘ï¼Œå¯ä»¥åŠ å¿«é«˜æ€§èƒ½è®¡ç®—æœºè§†è§‰å’Œæ·±åº¦å­¦ä¹ è§†è§‰åº”ç”¨å¼€å‘é€Ÿåº¦å·¥å…·å¥—ä»¶ï¼Œé€‚ç”¨äºä»è¾¹ç¼˜åˆ°äº‘çš„å„ç§è‹±ç‰¹å°”å¹³å°ä¸Šï¼Œå¸®åŠ©ç”¨æˆ·æ›´å¿«åœ°å°†æ›´å‡†ç¡®çš„çœŸå®ä¸–ç•Œç»“æœéƒ¨ç½²åˆ°ç”Ÿäº§ç³»ç»Ÿä¸­ã€‚é€šè¿‡ç®€åŒ–çš„å¼€å‘å·¥ä½œæµç¨‹ï¼Œ OpenVINOâ„¢å¯èµ‹èƒ½å¼€å‘è€…åœ¨ç°å®ä¸–ç•Œä¸­éƒ¨ç½²é«˜æ€§èƒ½åº”ç”¨ç¨‹åºå’Œç®—æ³•ã€‚

&emsp;    C#æ˜¯ç”±Cå’ŒC++è¡ç”Ÿå‡ºæ¥çš„ä¸€ç§å®‰å…¨çš„ã€ç¨³å®šçš„ã€ç®€å•çš„ã€ä¼˜é›…çš„é¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€ã€‚C#ç»¼åˆäº†VBç®€å•çš„å¯è§†åŒ–æ“ä½œå’ŒC++çš„é«˜è¿è¡Œæ•ˆç‡ï¼Œä»¥å…¶å¼ºå¤§çš„æ“ä½œèƒ½åŠ›ã€ä¼˜é›…çš„è¯­æ³•é£æ ¼ã€åˆ›æ–°çš„è¯­è¨€ç‰¹æ€§å’Œä¾¿æ·çš„é¢å‘ç»„ä»¶ç¼–ç¨‹çš„æ”¯æŒæˆä¸º.NETå¼€å‘çš„é¦–é€‰è¯­è¨€ã€‚ç„¶è€Œ OpenVINOâ„¢æœªæä¾›C#è¯­è¨€æ¥å£ï¼Œè¿™å¯¹åœ¨C#ä¸­ä½¿ç”¨ OpenVINOâ„¢å¸¦æ¥äº†å¾ˆå¤šéº»çƒ¦ï¼Œåœ¨ä¹‹å‰çš„å·¥ä½œä¸­ï¼Œæˆ‘ä»¬æ¨å‡ºäº†[OpenVinoSharp](https://github.com/guojin-yan/OpenVinoSharp/tree/openvinosharp3.0)ï¼Œæ—¨åœ¨æ¨åŠ¨ OpenVINOâ„¢åœ¨C#é¢†åŸŸçš„åº”ç”¨ï¼Œç›®å‰å·²ç»æˆåŠŸåœ¨Windowå¹³å°å®ç°ä½¿ç”¨ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ä»‹ç»å¦‚ä½•åœ¨ AIxBoardå¼€å‘æ¿ä¸ŠåŸºäºLinuxç³»ç»Ÿå®ç°OpenVinoSharpã€‚

&emsp;    é¡¹ç›®ä¸­æ‰€ä½¿ç”¨çš„ä»£ç å·²ä¸Šä¼ è‡³OpenVinoSharpä»“åº“ä¸­ï¼ŒGitHubç½‘å€ä¸ºï¼š

```
https://github.com/guojin-yan/OpenVINOSharp/blob/openvinosharp3.0/tutorial_examples/AlxBoard_deploy_yolov8/Program.cs
```

## ä¸€ã€è‹±ç‰¹å°”å¼€å‘å¥—ä»¶ AIxBoard ä»‹ç»

<div align=center><span><img src="https://s2.loli.net/2023/08/01/nvUgJ7Hwaj5cm12.png" height=300/></span></div>

### 1.  äº§å“å®šä½

&emsp;    è‹±ç‰¹å°”å¼€å‘å¥—ä»¶ AIxBoard(çˆ±å…‹æ–¯æ¿)æ˜¯[è‹±ç‰¹å°”å¼€å‘å¥—ä»¶](https://www.intel.cn/content/www/cn/zh/developer/topic-technology/edge-5g/hardware/lan-wa-aixboard-edge-dev-kit.html)å®˜æ–¹åºåˆ—ä¸­çš„ä¸€å‘˜ï¼Œä¸“ä¸ºå…¥é—¨çº§äººå·¥æ™ºèƒ½åº”ç”¨å’Œè¾¹ç¼˜æ™ºèƒ½è®¾å¤‡è€Œè®¾è®¡ã€‚çˆ±å…‹æ–¯æ¿èƒ½å®Œç¾èƒœäººå·¥æ™ºèƒ½å­¦ä¹ ã€å¼€å‘ã€å®è®­ã€åº”ç”¨ç­‰ä¸åŒåº”ç”¨åœºæ™¯ã€‚è¯¥å¥—ä»¶é¢„è£…äº†è‹±ç‰¹å°”OpenVINOâ„¢å·¥å…·å¥—ä»¶ã€æ¨¡å‹ä»“åº“å’Œæ¼”ç¤ºæ¡ˆä¾‹ï¼Œä¾¿äºæ‚¨è½»æ¾å¿«æ·åœ°å¼€å§‹åº”ç”¨å¼€å‘ã€‚

&emsp;    å¥—ä»¶ä¸»è¦æ¥å£ä¸Jetson Nanoè½½æ¿å…¼å®¹ï¼ŒGPIOä¸æ ‘è“æ´¾å…¼å®¹ï¼Œèƒ½å¤Ÿæœ€å¤§é™åº¦åœ°å¤ç”¨æˆç†Ÿçš„ç”Ÿæ€èµ„æºã€‚è¿™ä½¿å¾—å¥—ä»¶èƒ½å¤Ÿä½œä¸ºè¾¹ç¼˜è®¡ç®—å¼•æ“ï¼Œä¸ºäººå·¥æ™ºèƒ½äº§å“éªŒè¯å’Œå¼€å‘æä¾›å¼ºå¤§æ”¯æŒï¼›åŒæ—¶ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºåŸŸæ§æ ¸å¿ƒï¼Œä¸ºæœºå™¨äººäº§å“å¼€å‘æä¾›æŠ€æœ¯æ”¯æ’‘ã€‚

&emsp;    ä½¿ç”¨AIxBoard(çˆ±å…‹æ–¯æ¿)å¼€å‘å¥—ä»¶ï¼Œæ‚¨å°†èƒ½å¤Ÿåœ¨çŸ­æ—¶é—´å†…æ„å»ºå‡ºä¸€ä¸ªå‡ºè‰²çš„äººå·¥æ™ºèƒ½åº”ç”¨åº”ç”¨ç¨‹åºã€‚æ— è®ºæ˜¯ç”¨äºç§‘ç ”ã€æ•™è‚²è¿˜æ˜¯å•†ä¸šé¢†åŸŸï¼Œçˆ±å…‹æ–¯æ¿éƒ½èƒ½ä¸ºæ‚¨æä¾›è‰¯å¥½çš„æ”¯æŒã€‚å€ŸåŠ© OpenVINOâ„¢ å·¥å…·å¥—ä»¶ï¼ŒCPUã€iGPU éƒ½å…·å¤‡å¼ºåŠ²çš„ AI æ¨ç†èƒ½åŠ›ï¼Œæ”¯æŒåœ¨å›¾åƒåˆ†ç±»ã€ç›®æ ‡æ£€æµ‹ã€åˆ†å‰²å’Œè¯­éŸ³å¤„ç†ç­‰åº”ç”¨ä¸­å¹¶è¡Œè¿è¡Œå¤šä¸ªç¥ç»ç½‘ç»œã€‚

### 2. äº§å“å‚æ•°

| ä¸»æ§     | è‹±ç‰¹å°”èµ›æ‰¬N5105 2.0-2.9GHz (formerly Jasper Lake) |
| -------- | ------------------------------------------------- |
| å†…å­˜     | æ¿è½½LPDDR4x 2933MHz, 4GB/6GB/8GB                  |
| å­˜å‚¨     | æ¿è½½ 64GB eMMCå­˜å‚¨                                |
| å­˜å‚¨æ‰©å±• | 1ä¸ªM.2 Key-M 2242æ‰©å±•æ§½, æ”¯æŒSATA&NVMEåè®®        |
| BIOS     | AMI UEFI BIOS                                     |
| ç³»ç»Ÿæ”¯æŒ | Ubuntu20.04 LTS                                   |
|          | Winodws 10/11                                     |

### 3. AIæ¨ç†å•å…ƒ

&emsp;    å€ŸåŠ©OpenVINOå·¥å…·ï¼Œèƒ½å¤Ÿå®ç°CPU+iGPUå¼‚æ„è®¡ç®—æ¨ç†ï¼ŒIGPUç®—åŠ›çº¦ä¸º0.6TOPS

| CPU  | INT8/FP16/FP32    |
| ---- | ----------------- |
| iGPU | INT8/FP16 0.6TOPS |
| GNA  | é«˜æ–¯åŠç¥ç»åŠ é€Ÿå™¨  |

## äºŒã€é…ç½® .NET ç¯å¢ƒ

&emsp;    .NET æ˜¯ä¸€ä¸ªå…è´¹çš„è·¨å¹³å°å¼€æºå¼€å‘äººå‘˜å¹³å° ï¼Œç”¨äºæ„å»ºå¤šç§åº”ç”¨ç¨‹åºã€‚ä¸‹é¢å°†æ¼”ç¤º AIxBoard å¦‚ä½•åœ¨ Ubuntu 20.04 ä¸Šå®‰è£… .NETç¯å¢ƒï¼Œæ”¯æŒ .NET  Core 2.0-3.1 ç³»åˆ— ä»¥åŠ.NET 5-8 ç³»åˆ— ï¼Œå¦‚æœä½ çš„ AIxBoard ä½¿ç”¨çš„æ˜¯å…¶ä»–Linuxç³»ç»Ÿï¼Œä½ å¯ä»¥å‚è€ƒ[åœ¨ Linux å‘è¡Œç‰ˆä¸Šå®‰è£… .NET - .NET | Microsoft Learn](https://learn.microsoft.com/zh-cn/dotnet/core/install/linux)ã€‚

### 1. æ·»åŠ  Microsoft åŒ…å­˜å‚¨åº“

&emsp;    ä½¿ç”¨ APT è¿›è¡Œå®‰è£…å¯é€šè¿‡å‡ ä¸ªå‘½ä»¤æ¥å®Œæˆã€‚ å®‰è£… .NET ä¹‹å‰ï¼Œè¯·è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå°† Microsoft åŒ…ç­¾åå¯†é’¥æ·»åŠ åˆ°å—ä¿¡ä»»å¯†é’¥åˆ—è¡¨ï¼Œå¹¶æ·»åŠ åŒ…å­˜å‚¨åº“ã€‚

&emsp;    æ‰“å¼€ç»ˆç«¯å¹¶è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```bash
wget https://packages.microsoft.com/config/ubuntu/20.04/packages-microsoft-prod.deb -O packages-microsoft-prod.deb
sudo dpkg -i packages-microsoft-prod.deb
rm packages-microsoft-prod.deb
```

&emsp;    ä¸‹å›¾ä¸ºè¾“å…¥ä¸Šé¢å‘½ä»¤åæ§åˆ¶å°çš„è¾“å‡ºï¼š

<div align=center><span><img src="https://s2.loli.net/2023/08/01/2PGvUJbrR68axWt.png" height=300/></span></div>

### 2. å®‰è£… SDK

&emsp;    .NET SDK ä½¿ä½ å¯ä»¥é€šè¿‡ .NET å¼€å‘åº”ç”¨ã€‚ å¦‚æœå®‰è£… .NET SDKï¼Œåˆ™æ— éœ€å®‰è£…ç›¸åº”çš„è¿è¡Œæ—¶ã€‚ è‹¥è¦å®‰è£… .NET SDKï¼Œè¯·è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```bash
sudo apt-get update
sudo apt-get install -y dotnet-sdk-3.1
```

&emsp;    ä¸‹å›¾ä¸ºå®‰è£…åæ§åˆ¶å°çš„è¾“å‡ºï¼š

<div align=center><span><img src="https://s2.loli.net/2023/08/08/tKY3oASu4Tf2dib.png" height=300/></span></div>


### 3. æµ‹è¯•å®‰è£…

&emsp;    é€šè¿‡å‘½ä»¤è¡Œå¯ä»¥æ£€æŸ¥ SDK ç‰ˆæœ¬ä»¥åŠRuntimeæ—¶ç‰ˆæœ¬ã€‚

```
dotnet --list-sdks
dotnet --list-runtimes
```

&emsp;    ä¸‹å›¾ä¸ºè¾“å…¥æµ‹è¯•å‘½ä»¤åæ§åˆ¶å°çš„è¾“å‡ºï¼š

<div align=center><span><img src="https://s2.loli.net/2023/08/08/DQnli6Z3xOpVYvh.png" height=300/></span></div>

### 4. æµ‹è¯•æ§åˆ¶å°é¡¹ç›®

&emsp;    åœ¨linuxç¯å¢ƒä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡**dotnet**å‘½ä»¤æ¥åˆ›å»ºå’Œç¼–è¯‘é¡¹ç›®ï¼Œé¡¹ç›®åˆ›å»ºå‘½ä»¤ä¸ºï¼š

```
dotnet new <project_type> -o <project name>
```

&emsp;    æ­¤å¤„æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç®€å•æµ‹è¯•æ§åˆ¶å°é¡¹ç›®ï¼š

```
dotnet new console -o test_net6.0
cd test_net6.0
dotnet run
```

&emsp;    ä¸‹å›¾ä¸ºè¾“å…¥æµ‹è¯•å‘½ä»¤åæ§åˆ¶å°çš„è¾“å‡ºä»¥åŠé¡¹ç›®æ–‡ä»¶å¤¹æ–‡ä»¶æƒ…å†µï¼ŒC#é¡¹ç›®ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ª**Program.cs**ç¨‹åºæ–‡ä»¶ï¼Œé‡Œé¢åŒ…å«äº†ç¨‹åºè¿è¡Œå…¥å£ä¸»å‡½æ•°ï¼ŒåŒæ—¶è¿˜ä¼šåˆ›å»ºä¸€ä¸ª**\*.csproj**æ–‡ä»¶ï¼Œè´Ÿè´£æŒ‡å®šé¡¹ç›®ç¼–è¯‘ä¸­çš„ä¸€äº›é…ç½®ã€‚ 

<div align=center><span><img src="https://s2.loli.net/2023/08/01/4WjvIPOZFHsnihQ.png" height=300/><img src="https://s2.loli.net/2023/08/01/FSkNPvLpVt1qbGX.png" height=100/></span></div>

&emsp;    ä»¥ä¸Šå°±æ˜¯.NETç¯å¢ƒçš„é…ç½®æ­¥éª¤ï¼Œå¦‚æœä½ çš„ç¯å¢ƒä¸æœ¬æ–‡ä¸åŒ¹é…ï¼Œå¯ä»¥é€šè¿‡[.NET æ–‡æ¡£ | Microsoft Learn](https://learn.microsoft.com/zh-cn/dotnet/) è·å–æ›´å¤šå®‰è£…æ­¥éª¤ã€‚

## ä¸‰ã€å®‰è£… OpenVINO Runtime

&emsp;    OpenVINOâ„¢ æœ‰ä¸¤ç§å®‰è£…æ–¹å¼: OpenVINO Runtimeå’ŒOpenVINO Development Toolsã€‚OpenVINO RuntimeåŒ…å«ç”¨äºåœ¨å¤„ç†å™¨è®¾å¤‡ä¸Šè¿è¡Œæ¨¡å‹éƒ¨ç½²æ¨ç†çš„æ ¸å¿ƒåº“ã€‚OpenVINO Development Toolsæ˜¯ä¸€ç»„ç”¨äºå¤„ç†OpenVINOå’ŒOpenVINOæ¨¡å‹çš„å·¥å…·ï¼ŒåŒ…æ‹¬æ¨¡å‹ä¼˜åŒ–å™¨ã€OpenVINO Runtimeã€æ¨¡å‹ä¸‹è½½å™¨ç­‰ã€‚åœ¨æ­¤å¤„æˆ‘ä»¬åªéœ€è¦å®‰è£…OpenVINO Runtimeå³å¯ã€‚

### 1. ä¸‹è½½ OpenVINO Runtime

&emsp;    è®¿é—®[Download the Intel Distribution of OpenVINO Toolkit](https://www.intel.com/content/www/us/en/developer/tools/openvino-toolkit/download.html?ENVIRONMENT=DEV_TOOLS&OP_SYSTEM=WINDOWS&VERSION=v_2023_0_1&DISTRIBUTION=PIP)é¡µé¢ï¼ŒæŒ‰ç…§ä¸‹é¢æµç¨‹é€‰æ‹©ç›¸åº”çš„å®‰è£…é€‰é¡¹ï¼Œåœ¨ä¸‹è½½é¡µé¢ï¼Œç”±äºæˆ‘ä»¬çš„è®¾å¤‡ä½¿ç”¨çš„æ˜¯**Ubuntu20.04**ï¼Œå› æ­¤ä¸‹è½½æ—¶æŒ‰ç…§æŒ‡å®šçš„ç¼–è¯‘ç‰ˆæœ¬ä¸‹è½½å³å¯ã€‚

<div align=center><span><img src="https://s2.loli.net/2023/08/01/BJ9SaVZmz8TUx4l.jpg" height=300/><img src="https://s2.loli.net/2023/08/01/GJbCHiSTtwdj791.jpg" height=200/></span></div>

### 2. è§£å‹å®‰è£…åŒ…

&emsp;    æˆ‘ä»¬æ‰€ä¸‹è½½çš„ OpenVINO Runtime æœ¬è´¨æ˜¯ä¸€ä¸ªC++ä¾èµ–åŒ…ï¼Œå› æ­¤æˆ‘ä»¬æŠŠå®ƒæ”¾åˆ°æˆ‘ä»¬çš„ç³»ç»Ÿç›®å½•ä¸‹ï¼Œè¿™æ ·åœ¨ç¼–è¯‘æ—¶ä¼šæ ¹æ®è®¾ç½®çš„ç³»ç»Ÿå˜é‡è·å–ä¾èµ–é¡¹ã€‚é¦–å…ˆåœ¨ç³»ç»Ÿæ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼š

```bash
sudo mkdir -p /opt/intel
```

&emsp;    ç„¶åè§£å‹ç¼©æˆ‘ä»¬ä¸‹è½½çš„å®‰è£…æ–‡ä»¶ï¼Œå¹¶å°†å…¶ç§»åŠ¨åˆ°æŒ‡å®šæ–‡ä»¶å¤¹ä¸‹ï¼š

```bash
tar -xvzf l_openvino_toolkit_ubuntu20_2023.0.1.11005.fa1c41994f3_x86_64.tgz
sudo mv l_openvino_toolkit_ubuntu20_2023.0.1.11005.fa1c41994f3_x86_64 /opt/intel/openvino_2022.3.0
```

### 3. å®‰è£…ä¾èµ–

&emsp;    æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦å®‰è£… OpenVINO Runtime æ‰€è®¸é›…çš„ä¾èµ–é¡¹ï¼Œé€šè¿‡å‘½ä»¤è¡Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤å³å¯ï¼š

```bash
cd /opt/intel/openvino_2022.3.0/
sudo -E ./install_dependencies/install_openvino_dependencies.sh
```

<div align=center><span><img src="https://s2.loli.net/2023/08/01/B9ehCPf8KvXURFg.png" height=300/></span></div>

### 4. é…ç½®ç¯å¢ƒå˜é‡

&emsp;    å®‰è£…å®Œæˆåï¼Œæˆ‘ä»¬éœ€è¦é…ç½®ç¯å¢ƒå˜é‡ï¼Œä»¥ä¿è¯åœ¨è°ƒç”¨æ—¶ç³»ç»Ÿå¯ä»¥è·å–å¯¹åº”çš„æ–‡ä»¶ï¼Œé€šè¿‡å‘½ä»¤è¡Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤å³å¯ï¼š

```bash
source /opt/intel/openvino_2022.3.0/setupvars.sh
```

&emsp;    ä»¥ä¸Šå°±æ˜¯ OpenVINO Runtime ç¯å¢ƒçš„é…ç½®æ­¥éª¤ï¼Œå¦‚æœä½ çš„ç¯å¢ƒä¸æœ¬æ–‡ä¸åŒ¹é…ï¼Œå¯ä»¥é€šè¿‡[Install OpenVINOâ„¢ Runtime â€” OpenVINOâ„¢ documentation â€” Version(2023.0)](https://docs.openvino.ai/2023.0/openvino_docs_install_guides_install_runtime.html)è·å–æ›´å¤šå®‰è£…æ­¥éª¤ã€‚

## å››ã€é…ç½® AlxBoard_deploy_yolov8 é¡¹ç›®

&emsp;    é¡¹ç›®ä¸­æ‰€ä½¿ç”¨çš„ä»£ç å·²ç»æ”¾åœ¨GitHubä»“åº“[AlxBoard_deploy_yolov8](https://github.com/guojin-yan/OpenVINOSharp/blob/openvinosharp3.0/tutorial_examples/AlxBoard_deploy_yolov8/Program.cs)ï¼Œå¤§å®¶å¯ä»¥æ ¹æ®æƒ…å†µè‡ªè¡Œä¸‹è½½å’Œä½¿ç”¨ï¼Œä¸‹é¢æˆ‘å°†ä¼šä»å¤´å¼€å§‹ä¸€æ­¥æ­¥æ„å»ºAlxBoard_deploy_yolov8é¡¹ç›®ã€‚

### 1. åˆ›å»º AlxBoard_deploy_yolov8 é¡¹ç›®

&emsp;    åœ¨è¯¥é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨OpenCvSharpï¼Œè¯¥ä¾èµ–ç›®å‰åœ¨Ubutunå¹³å°æœ€é«˜å¯ä»¥æ”¯æŒ.NET Core 3.1ï¼Œå› æ­¤æˆ‘ä»¬æ­¤å¤„åˆ›å»ºä¸€ä¸ª.NET Core 3.1çš„é¡¹ç›®ï¼Œä½¿ç”¨Terminalè¾“å…¥ä»¥ä¸‹æŒ‡ä»¤åˆ›å»ºå¹¶æ‰“å¼€é¡¹ç›®æ–‡ä»¶ï¼š

```shell
dotnet new console --framework "netcoreapp3.1" -o AlxBoard_deploy_yolov8
cd AlxBoard_deploy_yolov8
```

<div align=center><span><img src="https://s2.loli.net/2023/08/08/Pln5v6NmeWpg4JG.png" height=200/></span></div>

&emsp;    åˆ›å»ºå®Œé¡¹ç›®åï¼Œå°†[AlxBoard_deploy_yolov8](https://github.com/guojin-yan/OpenVINOSharp/blob/openvinosharp3.0/tutorial_examples/AlxBoard_deploy_yolov8/Program.cs)çš„ä»£ç å†…å®¹æ›¿æ¢åˆ°åˆ›å»ºçš„é¡¹ç›®ä¸­çš„**Program.cs**æ–‡ä»¶ä¸­.

### 2. æ·»åŠ  OpenVINOSharp ä¾èµ–

&emsp;    ç”±äºOpenVINOSharp å½“å‰æ­£å¤„äºå¼€å‘é˜¶æ®µï¼Œè¿˜æœªåˆ›å»ºLinuxç‰ˆæœ¬çš„NuGet Packageï¼Œå› æ­¤éœ€è¦é€šè¿‡ä¸‹è½½é¡¹ç›®æºç ä»¥é¡¹ç›®å¼•ç”¨çš„æ–¹å¼ä½¿ç”¨ã€‚

- **ä¸‹è½½æºç **

  é€šè¿‡Gitä¸‹è½½é¡¹ç›®æºç ï¼Œæ–°å»ºä¸€ä¸ªTerminalï¼Œå¹¶è¾“å…¥ä»¥ä¸‹å‘½ä»¤å…‹éš†è¿œç¨‹ä»“åº“ï¼Œå°†è¯¥é¡¹ç›®æ”¾ç½®åœ¨AlxBoard_deploy_yolov8åŒçº§ç›®å½•ä¸‹ã€‚

  ```
  git clone https://github.com/guojin-yan/OpenVINOSharp.git
  cd OpenVINOSharp
  ```

  æœ¬æ–‡çš„é¡¹ç›®ç›®å½•ä¸ºï¼š

  ```
  Program--
  		|-AlxBoard_deploy_yolov8
  		|-OpenVINOSharp
  ```

- **ä¿®æ”¹OpenVINOâ„¢ ä¾èµ–**

  ç”±äºé¡¹ç›®æºç çš„OpenVINOâ„¢ ä¾èµ–ä¸æœ¬æ–‡è®¾ç½®ä¸åŒï¼Œå› æ­¤éœ€è¦ä¿®æ”¹OpenVINOâ„¢ ä¾èµ–é¡¹çš„è·¯å¾„ï¼Œä¸»è¦é€šè¿‡ä¿®æ”¹``OpenVINOSharp/src/OpenVINOSharp/native_methods/ov_base.cs``æ–‡ä»¶å³å¯ï¼Œä¿®æ”¹å†…å®¹å¦‚ä¸‹ï¼š

  ```
  private const string dll_extern = "./openvino2023.0/openvino_c.dll";
  ---ä¿®æ”¹ä¸º--->
  private const string dll_extern = "libopenvino_c.so";
  ```

- **æ·»åŠ é¡¹ç›®ä¾èµ–**

  åœ¨Terminalè¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼Œå³å¯å°†OpenVINOSharpæ·»åŠ åˆ°AlxBoard_deploy_yolov8é¡¹ç›®å¼•ç”¨ä¸­ã€‚

  ```
  dotnet add reference ./../OpenVINOSharp/src/OpenVINOSharp/OpenVINOSharp.csproj
  ```

- æ·»åŠ ç¯å¢ƒå˜é‡

  è¯¥é¡¹ç›®éœ€è¦è°ƒç”¨OpenVINOâ„¢åŠ¨æ€é“¾æ¥åº“ï¼Œå› æ­¤éœ€è¦åœ¨å½“å‰ç¯å¢ƒä¸‹å¢åŠ OpenVINOâ„¢åŠ¨æ€é“¾æ¥åº“è·¯å¾„ï¼š

  ```
  export LD_LIBRARY_PATH=/opt/intel/openvino_2023.0/runtime/lib/intel64
  ```

### 3. æ·»åŠ OpenCvSharp

- å®‰è£…NuGet Package

  OpenCvSharpå¯ä»¥é€šè¿‡NuGet Packageå®‰è£…ï¼Œåªéœ€è¦åœ¨Terminalè¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š

  ```
  dotnet add package OpenCvSharp4_.runtime.ubuntu.20.04-x64
  dotnet add package OpenCvSharp4
  ```

- æ·»åŠ ç¯å¢ƒå˜é‡

  å°†ä»¥ä¸‹è·¯å¾„æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼š

  ```shell
  export LD_LIBRARY_PATH=/home/ygj/Program/OpenVINOSharp/tutorial_examples/AlxBoard_deploy_yolov8/bin/Debug/netcoreapp3.1/runtimes/ubuntu.20.04-x64/native
  ```

  ``/bin/Debug/netcoreapp3.1/runtimes/ubuntu.20.04-x64/native``æ˜¯AlxBoard_deploy_yolov8ç¼–è¯‘åç”Ÿæˆçš„è·¯å¾„ï¼Œè¯¥è·¯å¾„ä¸‹å­˜æ”¾äº†``libOpenCvSharpExtern.so``æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶ä¸»è¦æ˜¯å°è£…çš„OpenCVä¸­çš„å„ç§æ¥å£ã€‚ä¹Ÿå¯ä»¥å°†è¯¥æ–‡ä»¶æ‹·è´åˆ°é¡¹ç›®è¿è¡Œè·¯å¾„ä¸‹ã€‚

- æ£€æµ‹libOpenCvSharpExternä¾èµ–

  ç”±äºlibOpenCvSharpExtern.soæ˜¯åœ¨å…¶ä»–ç¯å¢ƒä¸‹ç¼–è¯‘å¥½çš„åŠ¨æ€é“¾æ¥åº“ï¼Œæœ¬æœºç”µè„‘å¯èƒ½ä¼šç¼ºå°‘ç›¸åº”çš„ä¾èµ–ï¼Œå› æ­¤å¯ä»¥é€šè¿‡``ldd``å‘½ä»¤æ£€æµ‹ã€‚

  ```shell
  ldd libOpenCvSharpExtern.so
  ```

  

  <div align=center><span><img src="https://s2.loli.net/2023/08/08/wZbkAmeg9dIv6BT.png" height=200/></span></div>

  å¦‚æœè¾“å‡ºå†…å®¹ä¸­æ²¡æœ‰``no found``çš„ï¼Œè¯´æ˜ä¸ç¼ºå°‘ä¾èµ–ï¼Œå¦‚æœå­˜åœ¨ï¼Œåˆ™éœ€è¦å®‰è£…ç¼ºå°‘çš„ä¾èµ–é¡¹æ‰å¯ä»¥æ­£å¸¸ä½¿ç”¨ã€‚

&emsp;    æ·»åŠ å®Œé¡¹ç›®ä¾èµ–ä»¥åŠNuGet Packageåï¼Œé¡¹ç›®çš„é…ç½®æ–‡ä»¶å†…å®¹ä¸ºï¼š

```properties
<Project Sdk="Microsoft.NET.Sdk">

  <ItemGroup>
    <ProjectReference Include="..\OpenVINOSharp\src\OpenVINOSharp\OpenVINOSharp.csproj" />
  </ItemGroup>

  <ItemGroup>
    <PackageReference Include="OpenCvSharp4" Version="4.8.0.20230708" />
    <PackageReference Include="OpenCvSharp4_.runtime.ubuntu.20.04-x64" Version="4.8.0.20230708" />
  </ItemGroup>

  <PropertyGroup>
    <OutputType>Exe</OutputType>
    <TargetFramework>netcoreapp3.1</TargetFramework>
  </PropertyGroup>

</Project>
```



## äº”ã€è¿è¡ŒAlxBoard_deploy_yolov8 é¡¹ç›®

&emsp;    è¯¥é¡¹ç›®æµ‹è¯•æ‰€ä½¿ç”¨çš„æ¨¡å‹ä¸æ–‡ä»¶éƒ½å¯ä»¥åœ¨OpenVINOSharpä¸­æ‰¾åˆ°ï¼Œå› æ­¤ä¸‹é¢æˆ‘ä»¬é€šè¿‡OpenVINOSharp ä»“åº“ä¸‹çš„æ¨¡å‹ä¸æ–‡ä»¶è¿›è¡Œæµ‹è¯•ã€‚

&emsp;    é€šè¿‡dotnetè¿è¡Œï¼Œåªéœ€è¦è¿è¡Œä»¥ä¸‹å‘½ä»¤å³å¯

```shell
dotnet run <args>
```

\<args>å‚æ•°è®¾æŒ‡çš„æ˜¯æ¨¡å‹é¢„æµ‹ç±»å‹ã€æ¨¡å‹è·¯å¾„ã€å›¾ç‰‡æ–‡ä»¶è·¯å¾„å‚æ•°ï¼Œé¢„æµ‹ç±»å‹è¾“å…¥åŒ…æ‹¬ï¼š 'det'ã€'seg'ã€'pose'ã€'cls' å››ç§ç±»å‹ï¼›é»˜è®¤æ¨ç†è®¾å¤‡è®¾ç½®ä¸º'AUTO'ï¼Œå¯¹äº'det'ã€'seg'é¢„æµ‹ï¼Œå¯ä»¥è®¾ç½®<path_to_lable>å‚æ•°ï¼Œå¦‚æœè®¾ç½®è¯¥å‚æ•°ï¼Œä¼šå°†ç»“æœç»˜åˆ¶åˆ°å›¾ç‰‡ä¸Šï¼Œå¦‚æœæœªè®¾ç½®ï¼Œä¼šé€šè¿‡æ§åˆ¶å°æ‰“å°å‡ºæ¥

### 1. ç¼–è¯‘è¿è¡Œ Yolov8-det æ¨¡å‹

ç¼–è¯‘è¿è¡Œå‘½ä»¤ä¸º:

```
dotnet run det /home/ygj/Program/OpenVINOSharp/model/yolov8/yolov8s.xml /home/ygj/Program/OpenVINOSharp/dataset/image/demo_2.jpg GPU.0 /home/ygj/Program/OpenVINOSharp/dataset/lable/COCO_lable.txt
```

æ¨¡å‹æ¨ç†è¾“å‡ºç»“æœä¸ºï¼š

```
---- OpenVINO INFO----
Description : OpenVINO Runtime
Build number: 2023.0.1-11005-fa1c41994f3-releases/2023/0
Set inference device  GPU.0.
[INFO] Loading model files: /home/ygj/Program/OpenVINOSharp/model/yolov8/yolov8s.xml
[INFO] model name: torch_jit
[INFO]    inputs:
[INFO]      input name: images
[INFO]      input type: f32
[INFO]      input shape: Shape : [1, 3, 640, 640]
[INFO]    outputs:
[INFO]      output name: output0
[INFO]      output type: f32
[INFO]      output shape: Shape : [1, 84, 8400]
[INFO] Read image  files: /home/ygj/Program/OpenVINOSharp/dataset/image/demo_2.jpg


  Detection  result : 

1: 0 0.89   (x:744 y:43 width:388 height:667)
2: 0 0.88   (x:149 y:202 width:954 height:507)
3: 27 0.72   (x:435 y:433 width:98 height:284)
```

<div align=center><span><img src="https://s2.loli.net/2023/07/23/YhXH543WkLEJAPS.png" height=300/></span></div>

### 2. ç¼–è¯‘è¿è¡Œ Yolov8-cls æ¨¡å‹

ç¼–è¯‘è¿è¡Œå‘½ä»¤ä¸º:

```
dotnet run cls /home/ygj/Program/OpenVINOSharp/model/yolov8/yolov8s-cls.xml /home/ygj/Program/OpenVINOSharp/dataset/image/demo_7.jpg GPU.0
```

æ¨¡å‹æ¨ç†è¾“å‡ºç»“æœä¸ºï¼š

```
---- OpenVINO INFO----
Description : OpenVINO Runtime
Build number: 2023.0.1-11005-fa1c41994f3-releases/2023/0
Set inference device  GPU.0.
[INFO] Loading model files: /home/ygj/Program/OpenVINOSharp/model/yolov8/yolov8s-cls.xml
[INFO] model name: torch_jit
[INFO]    inputs:
[INFO]      input name: images
[INFO]      input type: f32
[INFO]      input shape: Shape : [1, 3, 224, 224]
[INFO]    outputs:
[INFO]      output name: output0
[INFO]      output type: f32
[INFO]      output shape: Shape : [1, 1000]
[INFO] Read image  files: /home/ygj/Program/OpenVINOSharp/dataset/image/demo_7.jpg


 Classification Top 10 result : 

classid probability
------- -----------
294     0.992173
269     0.002861
296     0.002111
295     0.000714
270     0.000546
276     0.000432
106     0.000159
362     0.000147
260     0.000078
272     0.000070
```

### 3. ç¼–è¯‘è¿è¡Œ Yolov8-pose æ¨¡å‹

ç¼–è¯‘è¿è¡Œå‘½ä»¤ä¸º:

```
dotnet run pose /home/ygj/Program/OpenVINOSharp/model/yolov8/yolov8s-pose.xml /home/ygj/Program/OpenVINOSharp/dataset/image/demo_9.jpg GPU.0
```

æ¨¡å‹æ¨ç†è¾“å‡ºç»“æœä¸ºï¼š

```
---- OpenVINO INFO----
Description : OpenVINO Runtime
Build number: 2023.0.1-11005-fa1c41994f3-releases/2023/0
Set inference device  GPU.0.
[INFO] Loading model files: /home/ygj/Program/OpenVINOSharp/model/yolov8/yolov8s-pose.xml
[INFO] model name: torch_jit
[INFO]    inputs:
[INFO]      input name: images
[INFO]      input type: f32
[INFO]      input shape: Shape : [1, 3, 640, 640]
[INFO]    outputs:
[INFO]      output name: output0
[INFO]      output type: f32
[INFO]      output shape: Shape : [1, 56, 8400]
[INFO] Read image  files: /home/ygj/Program/OpenVINOSharp/dataset/image/demo_9.jpg


 Classification  result : 

1: 1   0.94   (x:104 y:22 width:152 height:365)  Nose: (188 ,60 ,0.93) Left Eye: (192 ,53 ,0.83) Right Eye: (180 ,54 ,0.90) Left Ear: (196 ,53 ,0.50) Right Ear: (167 ,56 ,0.76) Left Shoulder: (212 ,92 ,0.93) Right Shoulder: (151 ,93 ,0.94) Left Elbow: (230 ,146 ,0.90) Right Elbow: (138 ,142 ,0.93) Left Wrist: (244 ,199 ,0.89) Right Wrist: (118 ,187 ,0.92) Left Hip: (202 ,192 ,0.97) Right Hip: (168 ,193 ,0.97) Left Knee: (184 ,272 ,0.96) Right Knee: (184 ,276 ,0.97) Left Ankle: (174 ,357 ,0.87) Right Ankle: (197 ,354 ,0.88) 
```

<div align=center><span><img src="https://s2.loli.net/2023/07/31/tebOc4qRljZ3riz.png" height=300/></span></div>

### 4. ç¼–è¯‘è¿è¡Œ Yolov8-seg æ¨¡å‹

ç¼–è¯‘è¿è¡Œå‘½ä»¤ä¸º:

```
dotnet run seg /home/ygj/Program/OpenVINOSharp/model/yolov8/yolov8s-seg.xml /home/ygj/Program/OpenVINOSharp/dataset/image/demo_2.jpg GPU.0 /home/ygj/Program/OpenVINOSharp/dataset/lable/COCO_lable.txt
```

æ¨¡å‹æ¨ç†è¾“å‡ºç»“æœä¸ºï¼š

```
---- OpenVINO INFO----
Description : OpenVINO Runtime
Build number: 2023.0.1-11005-fa1c41994f3-releases/2023/0
Set inference device  GPU.0.
[INFO] Loading model files: /home/ygj/Program/OpenVINOSharp/model/yolov8/yolov8s-seg.xml
47
[INFO] model name: torch_jit
[INFO]    inputs:
[INFO]      input name: images
[INFO]      input type: f32
[INFO]      input shape: Shape : [1, 3, 640, 640]
[INFO]    outputs:
[INFO]      output name: output0
[INFO]      output type: f32
[INFO]      output shape: Shape : [1, 116, 8400]
[INFO] Read image  files: /home/ygj/Program/OpenVINOSharp/dataset/image/demo_2.jpg
 

  Segmentation  result : 

1: 0 0.90   (x:745 y:42 width:403 height:671)
2: 0 0.86   (x:121 y:196 width:1009 height:516)
3: 27 0.69   (x:434 y:436 width:90 height:280)
```

<div align=center><span><img src="https://s2.loli.net/2023/07/31/CxNgWVLy79ADpKn.png" height=300/></span></div>



## å…­ã€æ¨¡å‹è¿è¡Œæ—¶é—´

&emsp;    AIxBoardå¼€å‘æ¿æ¿è½½äº†è‹±ç‰¹å°”èµ›æ‰¬N5105 CPUä»¥åŠè‹±ç‰¹å°”11ä»£é›†æˆæ˜¾å¡ï¼Œæ­¤å¤„å¯¹CPUã€GPUçš„æ¨ç†æƒ…å†µåšäº†ä¸€ä¸ªç®€å•æµ‹è¯•ï¼Œä¸»è¦æ£€æµ‹äº†æ¨¡å‹æ¨ç†æ—¶é—´ï¼Œå¹¶ä½¿ç”¨è‹±ç‰¹å°”å¹»å½±å³¡è°·è¿›è¡Œäº†åŒæ­¥æµ‹è¯•ï¼Œæµ‹è¯•ç»“æœå¦‚è¡¨æ‰€ç¤º.

|   Device    | CPU: N5105 | GPU: Intel 11th é›†æ˜¾ | CPU: i7-1165G7 | GPU: lntel(R) Iris(R) Xe Graphics |
| :---------: | :--------: | :------------------: | :------------: | :-------------------------------: |
| Yolov8-det  |  586.3ms   |        83.1ms        |    127.1ms     |              19.5ms               |
| Yolov8-seg  |  795.6ms   |       112.5ms        |    140.1ms     |              25.0ms               |
| Yolov8-pose |  609.8ms   |        95.1ms        |    117.2ms     |              23.3ms               |
| Yolov8-cls  |   33.1ms   |        9.2ms         |     6.1ms      |               2.7ms               |

&emsp;    å¯ä»¥çœ‹å‡ºï¼Œè‹±ç‰¹å°”èµ›æ‰¬N5105 CPUåœ¨æ¨¡å‹æ¨ç†æ€§èƒ½æ˜¯ååˆ†å¼ºå¤§çš„ï¼Œä¸”æ­é…çš„è‹±ç‰¹å°”11ä»£é›†æˆæ˜¾å¡ï¼Œå°†æ¨ç†é€Ÿåº¦æå‡äº†6å€å·¦å³ï¼Œé’ˆå¯¹Yolov8æ¨¡å‹ï¼Œå¹³å‡å¤„ç†é€Ÿåº¦å¯ä»¥è¾¾åˆ°10FPsã€‚è€Œç›¸æ¯”äºå¹»å½±å³¡è°·çš„æ¨ç†é€Ÿåº¦ï¼ŒAIxBoardå¼€å‘æ¿æ¨ç†æ€§èƒ½å¤§çº¦ä¸ºå…¶äº”åˆ†ä¹‹ä¸€ï¼Œè¿™ç›¸æ¯”ä¸€èˆ¬çš„å¼€å‘æ¿ï¼ŒAIxBoardå¼€å‘æ¿çš„ç®—åŠ›è¿˜æ˜¯ååˆ†å¼ºå¤§çš„ã€‚

## ä¸ƒã€æ€»ç»“

&emsp;    åœ¨è¯¥é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬åŸºäºUbutn 20.04 ç³»ç»Ÿï¼ŒæˆåŠŸå®ç°äº†åœ¨C#ç¯å¢ƒä¸‹è°ƒç”¨OpenVINOâ„¢éƒ¨ç½²æ·±åº¦å­¦ä¹ æ¨¡å‹ï¼ŒéªŒè¯äº†åœ¨Linuxç¯å¢ƒä¸‹OpenVINOSharpé¡¹ç›®çš„çš„å¯è¡Œæ€§ï¼Œè¿™å¯¹åé¢åœ¨Linuxç¯å¢ƒä¸‹å¼€å‘OpenVINOSharpå…·æœ‰å¾ˆé‡è¦çš„æ„ä¹‰ã€‚

&emsp;    é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜ä½¿ç”¨OpenVINOSharpæ£€éªŒäº†AIxBoardå¼€å‘æ¿çš„æ¨¡å‹æ¨ç†èƒ½åŠ›ï¼Œæœ€æ€»é’ˆå¯¹Yolov8æ¨¡å‹ï¼Œå¹³å‡å¤„ç†é€Ÿåº¦å¯ä»¥è¾¾åˆ°10FPsï¼Œè¿™å¯¹ç›®å‰å¤§å¤šæ•°å¼€å‘æ¿æ¥è¯´ï¼Œå·²ç»è¾¾åˆ°äº†å¾ˆé«˜çš„æ¨ç†é€Ÿåº¦ã€‚åç»­æˆ‘è¿˜ä¼šå°†ç»§ç»­ä½¿ç”¨OpenVINOSharpåœ¨AIxBoardå¼€å‘æ¿éƒ¨ç½²æ›´å¤šçš„æ·±åº¦å­¦ä¹ æ¨¡å‹ã€‚

